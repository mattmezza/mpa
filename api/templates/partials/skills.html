{# Skills tab partial #}
<div x-data="{ filter: '' }">
  <div class="flex items-center gap-2 mb-4 flex-wrap">
    <button class="btn btn-sm" hx-get="/partials/skills" hx-target="#tab-content" hx-swap="innerHTML">
      Refresh
    </button>
    <input type="text" class="input-sm flex-1" style="max-width:300px"
           placeholder="Filter skills..." x-model="filter">
    <span class="text-muted text-xs">{{ skills|length }} skills</span>
  </div>

  <div class="overflow-x-auto">
    <table class="table">
      <thead>
        <tr>
          <th class="min-w-[160px]">Name</th>
          <th>Summary</th>
          <th class="w-20"></th>
        </tr>
      </thead>
      <tbody>
        {% for skill in skills %}
        <tr x-show="!filter || {{ skill.name|tojson|forceescape }}.toLowerCase().includes(filter.toLowerCase()) || {{ (skill.summary or '')|tojson|forceescape }}.toLowerCase().includes(filter.toLowerCase())">
          <td class="text-xs break-all">{{ skill.name }}</td>
          <td class="text-xs">{{ skill.summary }}</td>
          <td class="whitespace-nowrap">
            <a class="btn btn-sm" href="/admin/skills/{{ skill.name }}">edit</a>
            <button class="btn-danger btn-sm ml-0.5"
                    hx-post="/skills/delete" hx-target="#tab-content" hx-swap="innerHTML"
                    hx-vals='{"name": {{ skill.name|tojson }} }'
                    hx-confirm="Delete skill &quot;{{ skill.name }}&quot;?">
              x
            </button>
          </td>
        </tr>
        {% endfor %}
        {% if not skills %}
        <tr><td colspan="3" class="text-muted text-xs text-center py-4">No skills found</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <div class="mt-5 flex items-center gap-2">
    <a class="btn btn-sm" href="/admin/skills/new">Create new skill</a>
  </div>
</div>
