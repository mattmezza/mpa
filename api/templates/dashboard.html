{% extends "base.html" %}
{% block title %}Admin Dashboard — Agent Admin{% endblock %}

{% block body %}
<div>
  <h1 class="text-xl text-accent mb-2">Agent Admin</h1>

  {# Status bar — loaded via HTMX, refreshes on lifecycle events #}
  <div id="status-bar" class="flex items-center gap-3 py-2 mb-4 flex-wrap"
       hx-get="/partials/status" hx-trigger="load, refresh-status from:body" hx-swap="innerHTML">
    <span class="text-muted text-xs">Loading...</span>
  </div>

  {# Tab navigation #}
  <div class="flex border-b border-border mb-4" x-data="{ tab: 'config' }">
    <button class="tab-link" :class="tab === 'config' && 'tab-link-active'"
            @click="if (tab !== 'config') { tab = 'config'; htmx.ajax('GET', '/partials/config', {target: '#tab-content', swap: 'innerHTML'}); }">
      Config
    </button>
    <button class="tab-link" :class="tab === 'identity' && 'tab-link-active'"
            @click="if (tab !== 'identity') { tab = 'identity'; htmx.ajax('GET', '/partials/identity', {target: '#tab-content', swap: 'innerHTML'}); }">
      Agent Identity
    </button>
    <button class="tab-link" :class="tab === 'permissions' && 'tab-link-active'"
            @click="if (tab !== 'permissions') { tab = 'permissions'; htmx.ajax('GET', '/partials/permissions', {target: '#tab-content', swap: 'innerHTML'}); }">
      Permissions
    </button>
    <button class="tab-link" :class="tab === 'memory' && 'tab-link-active'"
            @click="if (tab !== 'memory') { tab = 'memory'; htmx.ajax('GET', '/partials/memory', {target: '#tab-content', swap: 'innerHTML'}); }">
      Memory
    </button>
    <button class="tab-link" :class="tab === 'logs' && 'tab-link-active'"
            @click="if (tab !== 'logs') { tab = 'logs'; htmx.ajax('GET', '/partials/logs', {target: '#tab-content', swap: 'innerHTML'}); }">
      Logs
    </button>
  </div>

  {# Tab content — initially loads config #}
  <div id="tab-content" hx-get="/partials/config" hx-trigger="load" hx-swap="innerHTML">
    <span class="text-muted text-xs">Loading...</span>
  </div>
</div>
{% endblock %}
